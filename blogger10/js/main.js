(function(){var D=26;var z=100;var C="";var o="";var V="";var u="";var n=null;var R=function(){if(!n){n=new Messenger.DCF();if(document.body){document.body.getDCF_=R}}return n};function m(Y){if(document.cookie.length>0){var X,W=document.cookie.indexOf(Y+"=");if(W!=-1){W=W+Y.length+1;X=document.cookie.indexOf(";",W);if(X==-1){X=document.cookie.length}return unescape(document.cookie.substring(W,X))}}return""}function x(W,Y,aa,Z){aa=aa||1;var X=new Date();X.setTime(X.getTime()+aa*24*60*60*1000);Z=Z||"/";document.cookie=W+"="+escape(Y)+";expires="+X.toGMTString()+";path="+Z+";"}function y(X,Y){if(document.cookie.length>0){var W=document.cookie.indexOf(X+"=");if(W!=-1){var Z=new Date();Z.setTime(Z.getTime()-1);Y=Y||"/";document.cookie=X+"=;expires="+Z.toGMTString()+";path="+Y+";"}}}function q(W){if(W){return W.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}else{return""}}function H(Z,aa,Y,X){var W=null;if(window.XMLHttpRequest){W=new XMLHttpRequest()}else{if(window.ActiveXObject){W=new ActiveXObject("Microsoft.XMLHTTP")}}if(W!=null){W.onreadystatechange=function(){if(W.readyState==4){if(W.status==200){if(aa){aa(W.responseText)}}else{var ab=W.statusText||"Connection error";if(Y){Y(ab)}else{console.log(ab)}}W=null}};W.requestTimer=setTimeout(30000,function(){try{if(W){W.abort();W.aborted=true}}catch(ab){log(ab)}});if(typeof X=="string"||X instanceof ArrayBuffer){W.open("POST",Z,true);W.send(X)}else{W.open("GET",Z,true);W.send(null)}}}function O(aa){var Z=document.querySelector("div.area-dir");Z.style.width=Math.max(100,window.innerWidth-z)+"px";var X=window.innerWidth-z,W=window.innerHeight-D;Z=document.getElementById("doc-view");Z.style.width=X+"px";Z.style.height=W+"px";Z=document.getElementById("mng-view");Z.style.width=X+"px";Z.style.height=W+"px";var ac=document.getElementById("doc-frm");var ab=X/920,Y=W/720;if(ab>=Y){ab=Math.min(Y*1.1,ab)}else{Y=Math.min(ab*1.1,Y)}if((ab>=0.95&&Y>=0.95)||(ab>=0.9&&ab<=1.1&&Y>=0.88&&Y<=1.1)||(ab>=1&&Y>=0.88)){ab=1;Y=1}if(ab==1&&Y==1){ac.style[u]="";ac.style.marginLeft="0px";ac.style.width=X+"px";ac.style.height=W+"px"}else{ac.style.width="920px";ac.style.height="720px";ac.style[u]="scale("+ab+","+Y+")";var ad=ab*920;if(X>ad){ac.style.marginLeft=((X-ad)/2)+"px"}else{ac.style.marginLeft="0px"}}}function d(Y){var W=document.getElementById("mng-view");var X=document.getElementById("doc-view");if(Y=="slide"){W.style.zIndex="0";W.style.visibility="hidden";X.style.zIndex="2000";X.style.visibility="visible"}else{W.style.zIndex="2000";W.style.visibility="visible";X.style.zIndex="0";X.style.visibility="hidden"}}function F(){var W=document.getElementById("doc-view");if(W.style.zIndex=="2000"){return true}else{return false}}var w={};var A={};var E={};var i=[];var N="";var a=[];var h="";function g(ac,ae){var Z=[],Y=ac.doc_list||[];var X=ac.repoUrl||("/"+ac.repos_name+"/");var W="$$"+ae+"/";for(var aa=0,af;af=Y[aa];aa++){var ad=af.flag||3;if(af.path.indexOf(W)==0&&(ad&256)==0){var ab=af.thumb||"";if(ab&&ab[0]=="$"&&ab[1]=="$"){ab=X+ab}Z.push([ac.user_name,ac.repos_name,af.path,ab,af.isUnread||false,af.title||"",af.desc||"",af.modify_at||0,ad])}}return Z}function l(Y,Z){if(E.user_name==Y&&E.repos_name==Z){return E}for(var W=0,X;X=i[W];W++){if(X.user_name==Y&&X.repos_name==Z){return X}}return null}function f(W){if(W.target.nodeName!="IMG"){return}W.target.style.visibility="visible"}function b(ac,af,Y,ag,ae,aa,ab){var X=document.createElement("div");X.setAttribute("uid",ab+"");X.setAttribute("user",af);X.setAttribute("name",Y);if(ab>0&&ab!=65535){X.setAttribute("loading","1");X.style.background="url(/software/blogger10/loading2.gif) no-repeat 2px 5px"}if(ae){X.setAttribute("title",ae)}X.className="btn-user"+(aa?" current":"");var ah="/software/blogger10/unread"+(ac<=9?ac:10)+".png";var W=document.createElement("span");W.innerHTML=q(ag||Y);X.appendChild(W);X.appendChild(document.createElement("br"));var Z=document.createElement("img");Z.onload=f;Z.src=ah;X.appendChild(Z);var ad=document.querySelector("div.left-btns");ad.appendChild(X)}function P(ab,W,ac,aa,X){ab.setAttribute("user",ac);ab.setAttribute("name",aa);if(X){var Z=ab.querySelector("span");if(Z){Z.innerHTML=q(X)}}ab.removeAttribute("loading");ab.style.background="";var Y=ab.querySelector("img");if(Y){Y.onload=f;Y.src="/software/blogger10/unread"+(W<=9?W:10)+".png"}}function S(){var Y=document.querySelector("div.btn-user[loading]");if(Y){return}if(i.length>0){var W=m("cate_"+E.user_name+"_@ALL")||"";if(W){w[E.user_name+"_@ALL"]=W}b(0,E.user_name,"ALL","","Collect above all",false,65535)}if(N){var X=["","",N];N="";setTimeout(function(){document.body.guiIsReady_=true;T(X)},500)}else{document.body.guiIsReady_=true}}function r(aa){var ac=[],Y=[],ao={},ah="";if(aa){ah="$$"+aa+"/"}for(var ag=-1;ag<i.length;ag++){var Z=ag<0?E:i[ag];var ae=Z.repoUrl||("/"+Z.repos_name+"/");var al=Z.doc_list||[];for(var af=0,ap;ap=al[af];af++){var aj=ap.path||"",W=aj.indexOf("/"),an="";if(W>3&&aj[0]=="$"&&aj[1]=="$"){an=aj.slice(2,W);if(!aa){aa=an;ah="$$"+an+"/"}}if(!an){continue}var X=ao[an];if(typeof X!="number"){ao[an]=(ap.isUnread?1:0);Y.push(an)}else{if(ap.isUnread){ao[an]=X+1}}var ai=ap.flag||3;if(aj.indexOf(ah)==0&&(ai&256)==0){var aq=ap.thumb||"";if(aq&&aq[0]=="$"&&aq[1]=="$"){aq=ae+aq}ac.push([Z.user_name,Z.repos_name,aj,aq,ap.isUnread||false,ap.title||"",ap.desc||"",ap.modify_at||0,ai])}}}if(Y.length==0||Y.indexOf(aa)<0){return}Y.sort();ac.sort(function(at,ar){return ar[7]-at[7]});var ad="<p>",ab=document.querySelector("#top-nav > div.area-dir");for(var ag=0,ak;ak=Y[ag];ag++){ad+='<span class="btn-dir'+(ak==aa?" current":"")+'"';ad+=' title="'+(ao[ak]||0)+' unread"';ad+=' name="@ALL" cate="'+ak+'">'+ak+"</span>"}ad+="&nbsp;</p>";ab.innerHTML=ad;d("list");var am=document.getElementById("mng-frm");am.onload=function(ar){am.onload=null;J();h=aa;a=ac;R().call("mng-frm","setSlides",ac)};setTimeout(function(){J()},10000);Q();am.src="/software/blogger10/list_slide.html"}function U(Y,ac,Z){var ad=0,W=0;for(var aa=0,ab;ab=ac[aa];aa++){var X=ab.modify_at||0;if(X>ad){ad=X}if(X>Z){ab.isUnread=true;W+=1}}Y.push(ad,W)}function c(ab){var Z=ab.user_name;var ak=ab.repos_name;var ah=w[Z+"_"+ak]||"";var W=A[Z+"_"+ak]||0;var al=ab.doc_list||[];var ao={},aa=[];for(var ai=0,aj;aj=al[ai];ai++){var ae=aj.path||"";if(ae.slice(0,2)=="$$"){var an,Y=ae.indexOf("/");if(Y>2){an=ae.slice(2,Y)}else{continue}var X=ao[an];if(typeof X!="number"){aa.push(an);ao[an]=(aj.isUnread?1:0)}else{if(aj.isUnread){ao[an]=X+1}}}}var ap=-1;if(aa.length){if(ah){ap=aa.indexOf(ah)}if(ap<0){ap=0}}aa.sort();var ag="<p>",af=document.querySelector("#top-nav > div.area-dir");for(var ai=0,aj;aj=aa[ai];ai++){ag+='<span class="btn-dir'+(ai==ap?" current":"")+'"';ag+=' title="'+(ao[aj]||0)+' unread"';ag+=' user="'+Z+'" name="'+ak+'" cate="'+aj+'">'+aj+"</span>"}ag+="&nbsp;</p>";af.innerHTML=ag;var ad=[],ac="";if(aa.length&&ap>=0){ac=aa[ap];ad=g(ab,ac)}d("list");var am=document.getElementById("mng-frm");am.onload=function(aq){am.onload=null;J();h=ac;a=ad;R().call("mng-frm","setSlides",ad)};setTimeout(function(){J()},10000);Q();am.src="/software/blogger10/list_slide.html"}function L(Z,W,X,ac){var Y=document.querySelector("#left-nav > div.left-btns");if(Z==0){Y.innerHTML=""}var ab=W.slice(0,W.length-11);var aa=W+"?time_="+(new Date()).valueOf();H(aa,function(al){var aj=null;try{aj=JSON.parse(al)}catch(ak){alert(ak)}if(aj instanceof Object&&aj.repos_name){if(Z==0){E=aj}else{i.push(aj)}var am=aj.user_name;var ai=aj.repos_name;var an=m("cate_"+am+"_"+ai)||"";if(an){w[am+"_"+ai]=an}var af=parseFloat(m("time_"+am+"_"+ai)||"0");A[am+"_"+ai]=af;var ah=aj.doc_list||[];if(aj.sort_by=="modify_time"){ah.sort(function(ap,ao){return(ao.modify_at||0)-(ap.modify_at||0)})}else{if(aj.sort_by=="create_time"){ah.sort(function(ap,ao){return(ao.create_at||0)-(ap.create_at||0)})}else{if(aj.sort_by=="name"){ah.sort(function(ap,ao){var ar=ap.path||"",aq=ao.path||"";if(ar==aq){return 0}else{if(ar>aq){return 1}else{return -1}}})}}}var ad=[];U(ad,ah,af);aj.maxModiTime=ad[0];aj.unreadNum=ad[1];aj.repoUrl=(ab?ab:"/"+ai+"/");x("time_"+am+"_"+ai,Math.max(af,aj.maxModiTime)+"",30,"/"+E.repos_name);if(Z==0){c(aj);b(aj.unreadNum,am,ai,aj.repos_desc||"",aj.repoUrl,true,Z)}else{var ag=document.querySelector('div.btn-user[uid="'+Z+'"]');var ae=(X?aj.repos_desc||"":"");if(ag){P(ag,aj.unreadNum,am,ai,ae)}}if(typeof ac=="function"){ac()}setTimeout(S,0)}},function(ad){alert("Read config.json failed: "+ad)})}function v(W){var aa=W.target;if(aa&&aa.nodeName=="SPAN"&&aa.classList.contains("btn-dir")){var ab=aa.getAttribute("user");var ad=aa.getAttribute("name");var af=aa.getAttribute("cate");if(!af){return}var ae=document.querySelector("span.btn-dir.current");if(ae===aa){if(F()){d("list");return}}if(ad=="@ALL"){x("cate_"+E.user_name+"_@ALL",af,30,"/"+E.repos_name);w[E.user_name+"_@ALL"]=af;r(af);return}if(!ab||!ad){return}x("cate_"+ab+"_"+ad,af,30,"/"+ad);w[ab+"_"+ad]=af;var Z=l(ab,ad);if(!Z){return}var X=document.querySelector("span.btn-dir.current");if(X){X.classList.remove("current")}aa.classList.add("current");var Y=g(Z,af);d("list");var ac=document.getElementById("mng-frm");ac.onload=function(ag){ac.onload=null;J();h=af;a=Y;R().call("mng-frm","setSlides",Y)};setTimeout(function(){J()},10000);Q();ac.src="/software/blogger10/list_slide.html"}}function s(X){var ac=X.target;while(ac){if(ac.nodeName=="DIV"&&ac.classList.contains("btn-user")){break}else{ac=ac.parentNode}}if(!ac){return}if(ac.getAttribute("loading")){return}var ah=ac.querySelector("div.btn-user > img");if(ah){ah.parentNode.removeChild(ah)}var Y=ac.getAttribute("uid");var aa=ac.getAttribute("name");var Z=document.querySelector("div.btn-user.current");if(Z===ac){if(F()){d("list")}else{if(Y=="65535"){d("slide")}else{var W=document.getElementById("doc-frm");var ad=W.getAttribute("user")||"";var af=W.getAttribute("repo")||"";if(ad&&af&&af==aa&&ad==ac.getAttribute("user")){d("slide")}}}return}if(Y=="65535"){if(Z){Z.classList.remove("current")}ac.classList.add("current");var ag=w[E.user_name+"_@ALL"]||"";r(ag)}else{if(aa){if(Z){Z.classList.remove("current")}ac.classList.add("current");var ae=ac.getAttribute("user");if(aa&&ae){var ab=l(ae,aa);if(ab){c(ab)}}}}}function T(Y){var ab=Y[0],ac=Y[1],Z=Y[2];if(!Z){return}if(Z[0]=="$"&&Z[1]=="$"){var X=l(ab,ac);if(!X){return}var W=X.repoUrl||("/"+X.repos_name+"/");Z=W+Z}d("slide");var aa=document.getElementById("doc-frm");if(ab){aa.setAttribute("user",ab)}else{aa.removeAttribute("user")}if(ac){aa.setAttribute("repo",ac)}else{aa.removeAttribute("repo")}aa.setAttribute("path",Z);setTimeout(function(){J()},10000);aa.onload=function(ad){aa.onload=null;J()};Q();aa.src=Z}function e(ad,Y){var af=document.querySelector("span.btn-dir.current");if(!af){return""}var an=af.getAttribute("cate")||"";if(!an||an!=h){return""}var aj=af.getAttribute("name")||"";var W=af.getAttribute("user")||"";var ab=(aj=="@ALL");if(!ab){if(!W||!aj){return""}}var ae=document.getElementById("doc-frm");if(ae.parentNode.style.zIndex!="2000"){return""}var Z=ae.getAttribute("path");if(!Z){return""}var ao="",ac="",am="",X="",al=a;for(var ai=0,ak;ak=al[ai];ai++){var ag=ak[2]||"",ah=ag;if(ag&&ag[ag.length-1]!="/"){ag+="/"}if(ag[0]=="$"&&ag[1]=="$"){var aa=l(ak[0],ak[1]);if(aa){ag=(aa.repoUrl||("/"+aa.repos_name+"/"))+ag}}if(ag==Z){if(Y){ad.push(ao,ac,am);return X}else{ak=al[ai+1];if(ak){ag=ak[2]||"";ad.push(ak[0],ak[1],ag);if(ag&&ag[ag.length-1]!="/"){ag+="/"}if(ag[0]=="$"&&ag[1]=="$"){var aa=l(ak[0],ak[1]);if(aa){ag=(aa.repoUrl||("/"+aa.repos_name+"/"))+ag}}return ag}else{return""}}}ao=ak[0];ac=ak[1];am=ah;X=ag}return""}function M(Y){var W=Y.target;if(W.nodeName=="DIV"&&W.classList.contains("prev-next-btn")){var Z=[],X=e(Z,W.classList.contains("left"));if(X){W.style.backgroundColor="rgba(220,220,220,0.8)"}}}function t(X){var W=X.target;if(W.nodeName=="DIV"&&W.classList.contains("prev-next-btn")){W.style.backgroundColor=""}}function K(Y){var W=Y.target;if(W.nodeName=="DIV"&&W.classList.contains("prev-next-btn")){var Z=[],X=e(Z,W.classList.contains("left"));if(X){setTimeout(function(){d("slide");var aa=document.getElementById("doc-frm");aa.setAttribute("user",Z[0]);aa.setAttribute("repo",Z[1]);aa.setAttribute("path",X);aa.onload=function(ab){aa.onload=null;J()};setTimeout(function(){J()},10000);Q();aa.src=X;R().call("mng-frm","setOpened",Z)},0)}}}function k(Y){switch(Y.keyCode){case 39:case 40:case 13:case 32:case 34:case 37:case 38:case 33:case 36:case 35:case 27:case 113:var X=document.getElementById("doc-view");if(X.style.zIndex=="2000"){try{var Z=document.getElementById("doc-frm");if(Z.contentWindow&&Z.contentWindow.window){var W=Z.contentWindow.window.handleDocKeyDown;if(W){W(Y)}}}catch(aa){console.log(aa)}}break}}function B(W){if(W.requestFullscreen){W.requestFullscreen()}else{if(W.mozRequestFullScreen){W.mozRequestFullScreen()}else{if(W.webkitRequestFullscreen){W.webkitRequestFullscreen()}else{if(W.msRequestFullscreen){W.msRequestFullscreen()}}}}}function p(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}var j=false;function Q(){var W=document.querySelector("div.to-fullscreen");W.style.backgroundImage="url(/software/blogger10/loading2.gif)"}function J(){var W=document.querySelector("div.to-fullscreen");if(j){W.style.backgroundImage="url(/software/blogger10/exit_fs.png)"}else{W.style.backgroundImage="url(/software/blogger10/enter_fs.png)"}}function G(X){var W=X.target;if(!W||!W.classList.contains("to-fullscreen")){return}if(Math.abs(screen.availHeight-window.innerHeight)<=1){p();W.style.backgroundImage="url(/software/blogger10/enter_fs.png)";j=false}else{B(document.documentElement);W.style.backgroundImage="url(/software/blogger10/exit_fs.png)";j=true}}document.addEventListener("DOMContentLoaded",function(X){if(!window.HTMLCanvasElement||!document.addEventListener){alert("The version of your web browser is too low for PINP Slide");return}var Y=navigator.userAgent;Y=Y.toLowerCase();var W=Y.match(/trident.*rv[ :]*([\d.]+)/);if(W){if(parseFloat(W[1])>=11){C="ie";o=W[1];V="MSTransitionEnd";u="-ms-transform"}}else{W=Y.match(/firefox\/([\d.]+)/);if(W){C="firefox";o=W[1];V="transitionend";u="transform"}else{W=Y.match(/chrome\/([\d.]+)/);if(W){C="chrome";o=W[1];V="webkitTransitionEnd";u="-webkit-transform"}else{W=Y.match(/opera.([\d.]+)/);if(W){C="opera";o=W[1];V="oTransitionEnd";u="transform"}else{W=Y.match(/safari\/([\d.]+)/);if(W){C="safari";o=W[1];V="webkitTransitionEnd";u="-webkit-transform"}else{W=Y.match(/webkit\/([\d.]+)/);if(W){C="webkit";o=W[1];V="webkitTransitionEnd";u="-webkit-transform"}}}}}}if(C==""||o==""){if(Y.match(/msie ([\d.]+)/)){alert("IE version too low for PINP Slide, please use IE11 or higher")}else{alert("PINP Slide only support: firefox/chrome/safari/opera/IE")}document.body.innerHTML="<h2>Unknown browser type</h2>";return}},false);function I(Y){if(Y){Y=Y.slice(1)}var ac={},W=Y.split("&");for(var aa=W.length-1;aa>=0;aa--){var ab=W[aa],X=ab.split("="),Z=(X[0]||"").trim();if(Z){ac[Z]=X[1]||""}}return ac}window.addEventListener("load",function(W){var ae=function(ag,ah){var ai=document.createElement("script");if(typeof ah=="function"){ai.onload=ah}ai.async=1;ai.src=ag;document.querySelector("head").appendChild(ai)};ae("//www.pinp.me/software/pages/blogger/js/menu.js");O();window.addEventListener("resize",O,false);document.addEventListener("keydown",k,false);var X=document.querySelectorAll("div.prev-next-btn");for(var Z=0,ad;ad=X[Z];Z++){ad.onmouseover=M;ad.onmouseout=t;ad.onclick=K}var Y=document.querySelector("div.to-fullscreen");Y.onclick=G;Y=document.querySelector("div.area-dir");Y.onclick=v;Y=document.querySelector("div.left-btns");Y.onclick=s;var af=document.getElementById("mng-view");var aa=document.getElementById("doc-view");var ac=document.getElementById("doc-frm");R().regist("loaded",function(ak){if(!ac.style[u]){var an=ak[0];var ap=false,am=window.navigator.userAgent;if(am.indexOf("Safari/")>0&&am.indexOf("iPad;")>0){ap=true}if(ap&&an.slice(0,5)=="slide"){var aj=ak[1],ai=ak[2],ag=ak[3],ah=ak[4];var ao=Math.floor((aa.clientWidth-ag)/2-aj+0.5);var al=Math.floor((aa.clientHeight-ah)/2-ai+0.5);ac.style.left=ao+"px";ac.style.top=al+"px"}}});R().regist("showSlideDoc",T);R().regist("switchFullScreen",function(ah){var ag=j;var aj=ah[0]||"none";if(aj=="none"){return ag}var ai=document.querySelector("div.to-fullscreen");if(ai){if(aj=="enter"){if(!j){G({target:ai})}}else{if(aj=="exist"){if(j){G({target:ai})}}else{G({target:ai})}}}return ag});var ab=0;L(ab,"config.json",false,function(){var ah=I(location.search);N=decodeURIComponent(ah.opendoc||"");var aj="//"+E.user_name+".github.io/"+E.repos_name;for(var am=0;am<2;am++){var ap=(am==0?E.builtin_repos:E.imported_repos)||[];var ao=E.user_name;for(var ai=0,an;an=ap[ai];ai++){var ag,aq="";if((an instanceof Array)&&an.length==2){ag=an[0];aq=an[1]}else{if(typeof an=="string"){ag=an}else{continue}}var al=ag.split("/").pop();if(am==0){if(al==E.repos_name){continue}ag="/"+al}else{if(ag[ag.length-1]=="/"){ag=ag.slice(0,ag.length-1)}if(aj==ag){continue}}var ak=ag+"/";ag+="/config.json";ab+=1;b(0,"",al,aq,ak,false,ab);L(ab,ag,!aq);if(ab>=64){break}}}})},false)})();